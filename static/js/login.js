(function(){var a=document.getElementById("auth"),b=document.getElementById("createAcc"),c=document.getElementById("forgotPass"),g=document.getElementById("lText"),m=document.getElementById("username"),n=document.getElementById("password"),p;
function r(e){for(var f=!1,h=!1,k=!1,l=!1,q=0;q<e.length;q++){var d=e.charAt(q);if(1==f&&1==h&&1==k&&1==l)return!0;0==f&&"A"<=d&&"Z">=d?f=!0:0==h&&"a"<=d&&"z">=d?h=!0:0==k&&"0"<=d&&"9">=d?k=!0:0==l&&("A">d||"Z"<d)&&("a">d||"z"<d)&&("0">d||"9"<d)&&(l=!0)}return 1==f&&1==h&&1==k&&1==l?!0:!1}window.passCheck=r;c.onclick=function(){snackbar("Asta e! \ud83e\udd37\u200d\u2642\ufe0f")};
b.onclick=function(){if(p)t();else{var e=document.createElement("input");setAttributes(e,{"class":"login",id:"repeatPassword",autocomplete:"new-password",maxlength:100,placeholder:"Repet\u0103 parola",type:"password"});e.required=!0;setAttributes(n,{autocomplete:"new-password"});setAttributes(a,{action:"createUser"});a.insertBefore(e,document.getElementById("submitB"));p=document.getElementById("repeatPassword");p.onkeyup=function(){p.className="login lGreen"==n.className?n.value==p.value?"login lGreen":
"login lRed":"login"};g.textContent="Creare cont";b.textContent="Ai cont? Logheaz\u0103-te!";m.onblur()}};function t(){g.parentNode.removeChild(p);p=void 0;setAttributes(n,{autocomplete:"current-password"});setAttributes(a,{action:"loginUser"});g.textContent="Login";b.textContent="Nu ai cont? Creeaz\u0103 unul!";m.onblur()}m.onkeyup=function(){m.className=6<=m.value.length&&40>=m.value.length?"login lGreen":0!=m.value.length?"login lRed":"login"};
m.onblur=function(){if(p)"login lGreen"==m.className&&xhr("POST","/usernameExists",{username:m.value},function(e){"true"==e&&(m.className="login lRed")});else m.onkeyup()};n.onkeyup=function(){if(8<=n.value.length&&100>=n.value.length&&1==r(n.value)){if(n.className="login lGreen",p)p.onkeyup(null)}else if(0!=n.value.length)n.className="login lRed";else if(n.className="login",p)p.onkeyup(null)};
a.addEventListener("submit",function(e){6<=m.value.length&&40>=m.value.length?8<=n.value.length&&100>=n.value.length?1==r(n.value)?p?n.value==p.value?xhr("POST","/createUser",{username:m.value,password:n.value},function(f){"true"==f?(t(),a.reset(),m.className="login",n.className="login",snackbar("Cont creat cu succes!")):snackbar("Numele de utilizator exist\u0103 deja!",2)}):snackbar("Parolele trebuie s\u0103 fie identice!",2):xhr("POST","/loginUser",{username:m.value,password:n.value},function(f){switch(f){case "USER_DISABLED":snackbar("Contul este dezactivat! Spunei lui Gennerator \u0219i rezolv\u0103 el.",
3);break;case "USER_PASSWORD_NOT_FOUND":snackbar("Numele de utilizator sau parola sunt incorecte!",2);break;default:document.body.innerHTML=f,setTimeout(function(){window.location.href="/"},3E3)}}):(err="Parola trebuie s\u0103 con\u021bin\u0103 cel pu\u021bin:\n",0==containsLowercase(n.value)&&(err+="- un caracter minuscul\n"),0==containsUppercase(n.value)&&(err+="- un caracter majuscul\n"),0==containsDigit(n.value)&&(err+="- o cifr\u0103\n"),0==containsSpecial(n.value)&&(err+="- un caracter special\n"),
snackbar(err,2)):snackbar("Parola trebuie s\u0103 con\u021bin\u0103 minimum 8 caractere!",2):snackbar("Numele de utilizator trebuie s\u0103 con\u021bin\u0103 minimum 6 caractere!",2);e.preventDefault()});})();
